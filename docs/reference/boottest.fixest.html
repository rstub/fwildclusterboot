<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast wild cluster bootstrap inference for object of class fixest — boottest.fixest • fwildclusterboot</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast wild cluster bootstrap inference for object of class fixest — boottest.fixest" />
<meta property="og:description" content="boottest.fixest is a S3 method that allows for fast wild cluster
bootstrap inference for objects of class fixest by  implementing
the fast wild bootstrap algorithm developed in Roodman et al., 2019." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fwildclusterboot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fwildclusterboot.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/s3alfisc/fwildclusterboot/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast wild cluster bootstrap inference for object of class fixest</h1>
    <small class="dont-index">Source: <a href='https://github.com/s3alfisc/fwildclusterboot/blob/master/R/boottest_fixest.R'><code>R/boottest_fixest.R</code></a></small>
    <div class="hidden name"><code>boottest.fixest.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>boottest.fixest</code> is a S3 method that allows for fast wild cluster
bootstrap inference for objects of class fixest by  implementing
the fast wild bootstrap algorithm developed in Roodman et al., 2019.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for fixest</span>
<span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>clustid</span>,
  <span class='va'>param</span>,
  <span class='va'>B</span>,
  bootcluster <span class='op'>=</span> <span class='st'>"max"</span>,
  fe <span class='op'>=</span> <span class='cn'>NULL</span>,
  sign_level <span class='op'>=</span> <span class='cn'>NULL</span>,
  conf_int <span class='op'>=</span> <span class='cn'>NULL</span>,
  seed <span class='op'>=</span> <span class='cn'>NULL</span>,
  R <span class='op'>=</span> <span class='cn'>NULL</span>,
  beta0 <span class='op'>=</span> <span class='fl'>0</span>,
  type <span class='op'>=</span> <span class='st'>"rademacher"</span>,
  impose_null <span class='op'>=</span> <span class='cn'>TRUE</span>,
  p_val_type <span class='op'>=</span> <span class='st'>"two-tailed"</span>,
  tol <span class='op'>=</span> <span class='fl'>1e-06</span>,
  maxiter <span class='op'>=</span> <span class='fl'>10</span>,
  na_omit <span class='op'>=</span> <span class='cn'>TRUE</span>,
  nthreads <span class='op'>=</span> <span class='fu'>getBoottest_nthreads</span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class fixest</p></td>
    </tr>
    <tr>
      <th>clustid</th>
      <td><p>A character vector containing the names of the cluster variables</p></td>
    </tr>
    <tr>
      <th>param</th>
      <td><p>A character vector. The name of the regression
coefficients for which the hypothesis is to be tested</p></td>
    </tr>
    <tr>
      <th>B</th>
      <td><p>Integer. The number of bootstrap iterations. When the number of clusters is low,
increasing B adds little additional runtime.</p></td>
    </tr>
    <tr>
      <th>bootcluster</th>
      <td><p>A character vector. Specifies the bootstrap clustering variable or variables. If more
than one variable is specified, then bootstrapping is clustered by the intersections of
clustering implied by the listed variables. To mimic the behavior of stata's boottest command,
the default is to cluster by the intersection of all the variables specified via the <code>clustid</code> argument,
even though that is not necessarily recommended (see the paper by Roodman et al cited below, section 4.2).
Other options include "min", where bootstrapping is clustered by the cluster variable with the fewest clusters.</p></td>
    </tr>
    <tr>
      <th>fe</th>
      <td><p>A character vector of length one which contains the name of the fixed effect to be projected
out in the bootstrap. Note: if regression weights are used, fe
needs to be NULL.</p></td>
    </tr>
    <tr>
      <th>sign_level</th>
      <td><p>A numeric between 0 and 1 which sets the significance level
of the inference procedure. E.g. sign_level = 0.05
returns 0.95% confidence intervals. By default, sign_level = 0.05.</p></td>
    </tr>
    <tr>
      <th>conf_int</th>
      <td><p>A logical vector. If TRUE, boottest computes confidence
intervals by p-value inversion. If FALSE, only the p-value is returned.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>An integer. Allows the user to set a random seed. If NULL, <code><a href='boottest.html'>boottest()</a></code> sets an
internal seed. Hence by default, calling <code><a href='boottest.html'>boottest()</a></code> multiple times on the same object will produce
the same test statistics.</p></td>
    </tr>
    <tr>
      <th>R</th>
      <td><p>Hypothesis Vector giving linear combinations of coefficients. Must be either NULL or a vector of the same length as <code>param</code>. If NULL, a vector of ones of length param.</p></td>
    </tr>
    <tr>
      <th>beta0</th>
      <td><p>A numeric. Shifts the null hypothesis
H0: param = beta0 vs H1: param != beta0</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character or function. The character string specifies the type
of boostrap to use: One of "rademacher", "mammen", "norm"
and "webb". Alternatively, type can be a function(n) for drawing
wild bootstrap factors. "rademacher" by default.
For the Rademacher and Mammen distribution, if the number of replications B exceeds
the number of possible draw ombinations, 2^(#number of clusters), then <code><a href='boottest.html'>boottest()</a></code>
will use each possible combination once (enumeration).</p></td>
    </tr>
    <tr>
      <th>impose_null</th>
      <td><p>Logical. Controls if the null hypothesis is imposed on
the bootstrap dgp or not. Null imposed <code>(WCR)</code> by default.
If FALSE, the null is not imposed <code>(WCU)</code></p></td>
    </tr>
    <tr>
      <th>p_val_type</th>
      <td><p>Character vector of length 1. Type of p-value.
By default "two-tailed". Other options include "equal-tailed", "&gt;" and "&lt;".</p></td>
    </tr>
    <tr>
      <th>tol</th>
      <td><p>Numeric vector of length 1. The desired accuracy
(convergence tolerance) used in the root finding procedure to find the confidence interval.
1e-6 by default.</p></td>
    </tr>
    <tr>
      <th>maxiter</th>
      <td><p>Integer. Maximum number of iterations used in the root finding procedure to find the confidence interval.
10 by default.</p></td>
    </tr>
    <tr>
      <th>na_omit</th>
      <td><p>Logical. If TRUE, <code><a href='boottest.html'>boottest()</a></code> omits rows with missing
variables in the cluster variable that have not previously been deleted
when fitting the regression object (e.g. if the cluster variable was not used
when fitting the regression model).</p></td>
    </tr>
    <tr>
      <th>nthreads</th>
      <td><p>The number of threads. Can be: a) an integer lower than,
or equal to, the maximum number of threads; b) 0: meaning
all available threads will be used; c) a number strictly
between 0 and 1 which represents the fraction of all threads
to use. The default is to use 1 core.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to or from other methods.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>boottest</code></p>
<dt>p_val</dt><dd><p>The bootstrap p-value.</p></dd>
<dt>conf_int</dt><dd><p>The bootstrap confidence interval.</p></dd>
<dt>param</dt><dd><p>The tested parameter.</p></dd>
<dt>N</dt><dd><p>Sample size. Might differ from the regression sample size if
the cluster variables contain NA values.</p></dd>
<dt>B</dt><dd><p>Number of Bootstrap Iterations.</p></dd>
<dt>clustid</dt><dd><p>Names of the cluster Variables.</p></dd>
<dt>N_G</dt><dd><p>Dimension of the cluster variables as used in boottest.</p></dd>
<dt>sign_level</dt><dd><p>Significance sign_level used in boottest.</p></dd>
<dt>type</dt><dd><p>Distribution of the bootstrap weights.</p></dd>
<dt>p_test_vals</dt><dd><p>All p-values calculated while calculating the
confidence interval.</p></dd>
<dt>t_stat</dt><dd><p>The original test statistics - either imposing the null or not - with small sample correction <code>G / (G-1)</code>.</p></dd>
<dt>test_vals</dt><dd><p>All t-statistics calculated while calculating the
confidence interval.</p></dd>
<dt>t_boot</dt><dd><p>All bootstrap t-statistics.</p></dd>
<dt>regression</dt><dd><p>The regression object used in boottest.</p></dd>
<dt>call</dt><dd><p>Function call of boottest.</p></dd>

    <h2 class="hasAnchor" id="confidence-intervals"><a class="anchor" href="#confidence-intervals"></a>Confidence Intervals</h2>

    

<p><code>boottest</code> computes confidence intervals by inverting p-values.
In practice, the following procedure is used:</p><ul>
<li><p>Based on an initial guess for starting values, calculate p-values
for 26 equal spaced points between the starting values.</p></li>
<li><p>Out of the 26 calculated p-values, find the two pairs of values x
for which the corresponding p-values px cross the significance
sign_level sign_level.</p></li>
<li><p>Feed the two pairs of x into an numerical root finding procedure
and solve for the root. boottest currently relies on
<code><a href='https://rdrr.io/r/stats/uniroot.html'>stats::uniroot</a></code> and sets an absolute tolerance of 1e-06 and
stops the procedure after 10 iterations.</p></li>
</ul>

    <h2 class="hasAnchor" id="standard-errors"><a class="anchor" href="#standard-errors"></a>Standard Errors</h2>

    

<p><code>boottest</code> does not calculate standard errors.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Roodman et al., 2019, "Fast and wild: Bootstrap inference in
STATA using boottest", The STATA Journal.
(<a href='https://journals.sagepub.com/doi/full/10.1177/1536867X19830877'>https://journals.sagepub.com/doi/full/10.1177/1536867X19830877</a>)</p>
<p>Cameron, A. Colin, Jonah B. Gelbach, and Douglas L. Miller. "Bootstrap-based improvements for inference with clustered errors." The Review of Economics and Statistics 90.3 (2008): 414-427.</p>
<p>MacKinnon, James G., and Matthew D. Webb. "The wild bootstrap for few (treated) clusters." The Econometrics Journal 21.2 (2018): 114-135.</p>
<p>MacKinnon, James. "Wild cluster bootstrap confidence intervals." L'Actualite economique 91.1-2 (2015): 11-33.</p>
<p>Webb, Matthew D. Reworking wild bootstrap based inference for clustered errors. No. 1315. Queen's Economics Department Working Paper, 2013.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"fixest"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://s3alfisc.github.io/fwildclusterboot/'>fwildclusterboot</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://lrberge.github.io/fixest/'>fixest</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>voters</span><span class='op'>)</span>
<span class='va'>feols_fit</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://lrberge.github.io/fixest/reference/feols.html'>feols</a></span><span class='op'>(</span><span class='va'>proposition_vote</span> <span class='op'>~</span> <span class='va'>treatment</span> <span class='op'>+</span> <span class='va'>ideology1</span> <span class='op'>+</span> <span class='va'>log_income</span>,
           fixef <span class='op'>=</span>  <span class='st'>"Q1_immigration"</span>, 
           data <span class='op'>=</span> <span class='va'>voters</span><span class='op'>)</span>
<span class='va'>boot1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span><span class='va'>feols_fit</span>, 
                  B <span class='op'>=</span> <span class='fl'>9999</span>, 
                  param <span class='op'>=</span> <span class='st'>"treatment"</span>,
                  clustid <span class='op'>=</span> <span class='st'>"group_id1"</span><span class='op'>)</span>
<span class='va'>boot2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span><span class='va'>feols_fit</span>, 
                  B <span class='op'>=</span> <span class='fl'>9999</span>, 
                  param <span class='op'>=</span> <span class='st'>"treatment"</span>, 
                  clustid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"group_id1"</span>, <span class='st'>"group_id2"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>boot3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span><span class='va'>feols_fit</span>,
                  B <span class='op'>=</span> <span class='fl'>9999</span>,
                  param <span class='op'>=</span> <span class='st'>"treatment"</span>, 
                  clustid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"group_id1"</span>, <span class='st'>"group_id2"</span><span class='op'>)</span>,
                  fe <span class='op'>=</span> <span class='st'>"Q1_immigration"</span><span class='op'>)</span>
<span class='va'>boot4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span><span class='va'>feols_fit</span>, 
                  B <span class='op'>=</span> <span class='fl'>9999</span>, 
                  param <span class='op'>=</span> <span class='st'>"treatment"</span>, 
                  clustid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"group_id1"</span>, <span class='st'>"group_id2"</span><span class='op'>)</span>,
                  fe <span class='op'>=</span> <span class='st'>"Q1_immigration"</span>, 
                  sign_level <span class='op'>=</span> <span class='fl'>0.2</span>, 
                  seed <span class='op'>=</span> <span class='fl'>8</span>,
                  beta0 <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='co'># test treatment + ideology1 = 2                   </span>
<span class='va'>boot5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='boottest.html'>boottest</a></span><span class='op'>(</span><span class='va'>feols_fit</span>, 
                  B <span class='op'>=</span> <span class='fl'>9999</span>, 
                  clustid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"group_id1"</span>, <span class='st'>"group_id2"</span><span class='op'>)</span>,
                  param <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"treatment"</span>, <span class='st'>"ideology1"</span><span class='op'>)</span>,
                  R <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, 
                  beta0 <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>boot1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>boot1</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; boottest.fixest(object = feols_fit, clustid = "group_id1", param = "treatment", 
#&gt;     B = 9999)
#&gt; 	
#&gt;  Hypothesis: 1*treatment = 0
#&gt;  Observations: 300
#&gt;   Bootstr. Type: rademacher
#&gt;  Clustering: 1-way
#&gt;  Confidence Sets: 95%
#&gt;  Number of Clusters: 40
#&gt;  </div><div class='img'><img src='boottest.fixest-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alexander Fischer, David Roodman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


