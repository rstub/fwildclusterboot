<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast Wild Cluster Bootstrap Inference for Linear Models • fwildclusterboot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fast Wild Cluster Bootstrap Inference for Linear Models">
<meta property="og:description" content="Implementation of the fast algorithm for wild cluster bootstrap 
             inference developed in Roodman et al (2019, STATA Journal) for 
             linear regression models 
             &lt;doi:10.1177/1536867X19830877&gt;, 
             which makes it feasible to quickly calculate bootstrap test 
             statistics based on a large number of bootstrap draws even for 
             large samples - as long as the number of bootstrapping clusters 
             is not too large. Multiway clustering, regression weights, 
             bootstrap weights, fixed effects and subcluster bootstrapping
             are supported. Further, both restricted (WCR) and unrestricted
             (WCU) bootstrap are supported. Methods are provided for a variety 
             of fitted models, including lm(), feols() 
             (from package fixest) and felm() (from package lfe).
             Further, R port to WildBootTests.jl, which provides the wild cluster 
             bootstrap for OLS, IV and hypotheses with q &gt; 1.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fwildclusterboot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/fwildclusterboot.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/WildBootTests.html">Calling WildBootTests.jl through fwildclusterboot</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/s3alfisc/fwildclusterboot/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="fwildclusterboot-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#fwildclusterboot-" class="anchor"></a>fwildclusterboot <img src="reference/figures/logo.png" width="200px" align="right">
</h1></div>
<!-- badges: start -->
<!-- [![packageversion](https://img.shields.io/badge/Package%20version-x86_64-w64-mingw32, x86_64, mingw32, x86_64, mingw32, , 4, 0.5, 2021, 03, 31, 80133, R, R version 4.0.5 (2021-03-31), Shake and Throw-orange.svg?style=flat-square)](commits/master) -->

<!-- badges: end -->
<p>The <code>fwildclusterboot</code> provides a native R implementation of the fast wild cluster bootstrap algorithm developed in <a href="https://econpapers.repec.org/paper/qedwpaper/1406.htm">Roodman et al (2019)</a> for regression objects in R. It also ports functionality of <a href="https://github.com/droodman/WildBootTests.jl">WildBootTests.jl</a> to R via the <a href="https://github.com/stefan-m-lenz/JuliaConnectoR">JuliaConnectoR</a>.</p>
<p>The package’s central function is <code><a href="reference/boottest.html">boottest()</a></code>. It allows the user to test univariate hypotheses using a wild cluster bootstrap at extreme speed.</p>
<p><code>fwildclusterboot</code> supports the following features:</p>
<ul>
<li>The wild bootstrap for OLS (Wu 1986).</li>
<li>The subcluster bootstrap (MacKinnon and Webb 2018).</li>
<li>Confidence intervals formed by inverting the test and iteratively searching for bounds.</li>
<li>Multiway clustering.</li>
<li>One-way fixed effects.</li>
</ul>
<p>Additional features are provided through <code>WildBootTests.jl</code>:</p>
<ul>
<li>The Wild Restricted Efficient bootstrap (WRE) for IV/2SLS/LIML (<a href="https://www.tandfonline.com/doi/abs/10.1198/jbes.2009.07221">(Davidson &amp; MacKinnon, 2010)</a>).</li>
<li>Arbitrary and multiple linear hypotheses in the parameters.</li>
</ul>
<p><code>fwildclusterboot</code> supports the following models:</p>
<ul>
<li>OLS: <code>lm</code> (from stats), <code>fixest</code> (from fixest), <code>felm</code> from (lfe)</li>
<li>IV: <code>ivreg</code> (from ivreg).</li>
</ul>
<!-- The following features will be added in the future:  --><!-- * support for multivariate hypotheses  --><!-- * bootstrap distributions beyond the rademacher distribution --><div id="the-boottest-function" class="section level3">
<h3 class="hasAnchor">
<a href="#the-boottest-function" class="anchor"></a>The <code>boottest()</code> function</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># note: for performance reasons, the sampling of the bootstrap weights of types Rademacher, Webb and Normal within</span>
<span class="co"># fwildclusterboot are handled via the dqrng package, which is installed with the</span>
<span class="co"># package as a dependency. To set a global seed for boottest() for these weight types, use dqrng's dqset.seed() function</span>
<span class="co"># For Mammen weights, one can set a global seed via the set.seed() function.</span>

<span class="co"># set global seed for Rademacher, Webb and Normal weights</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://daqana.github.io/dqrng/">dqrng</a></span><span class="op">)</span>
<span class="fu">dqrng</span><span class="fu">::</span><span class="fu"><a href="https://daqana.github.io/dqrng/reference/dqrng-functions.html">dqset.seed</a></span><span class="op">(</span><span class="fl">965326</span><span class="op">)</span>
<span class="co"># set a global seed for Mammen weights</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">23325</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://s3alfisc.github.io/fwildclusterboot/">fwildclusterboot</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">voters</span><span class="op">)</span>

<span class="co"># fit the model via fixest::feols(), lfe::felm() or stats::lm()</span>

<span class="va">lm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">proposition_vote</span> <span class="op">~</span> <span class="va">treatment</span>  <span class="op">+</span> <span class="va">log_income</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Q1_immigration</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Q2_defense</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">voters</span><span class="op">)</span>
<span class="co"># bootstrap inference via boottest()</span>
<span class="va">lm_boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/boottest.html">boottest</a></span><span class="op">(</span><span class="va">lm_fit</span>, clustid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"group_id1"</span><span class="op">)</span>, B <span class="op">=</span> <span class="fl">9999</span>, param <span class="op">=</span> <span class="st">"treatment"</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">lm_boot</span><span class="op">)</span>
<span class="co">#&gt; boottest.lm(object = lm_fit, clustid = c("group_id1"), param = "treatment", </span>
<span class="co">#&gt;     B = 9999, seed = 1)</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;  Hypothesis: 1*treatment = 0</span>
<span class="co">#&gt;  Observations: 300</span>
<span class="co">#&gt;   Bootstr. Type: rademacher</span>
<span class="co">#&gt;  Clustering: 1-way</span>
<span class="co">#&gt;  Confidence Sets: 95%</span>
<span class="co">#&gt;  Number of Clusters: 40</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;              term estimate statistic p.value conf.low conf.high</span>
<span class="co">#&gt; 1 1*treatment = 0    0.079     3.983       0     0.04     0.118</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lrberge.github.io/fixest/">fixest</a></span><span class="op">)</span>
<span class="va">feols_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span><span class="va">proposition_vote</span> <span class="op">~</span> <span class="va">treatment</span>  <span class="op">+</span> <span class="va">log_income</span> <span class="op">|</span> <span class="va">Q1_immigration</span> <span class="op">+</span> <span class="va">Q2_defense</span>, data <span class="op">=</span> <span class="va">voters</span><span class="op">)</span>
<span class="co"># bootstrap inference via boottest()</span>
<span class="va">feols_boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/boottest.html">boottest</a></span><span class="op">(</span><span class="va">feols_fit</span>, clustid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"group_id1"</span><span class="op">)</span>, B <span class="op">=</span> <span class="fl">9999</span>, param <span class="op">=</span> <span class="st">"treatment"</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">feols_boot</span><span class="op">)</span>
<span class="co">#&gt; boottest.fixest(object = feols_fit, param = "treatment", B = 9999, </span>
<span class="co">#&gt;     clustid = c("group_id1"), seed = 1)</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;  Hypothesis: 1*treatment = 0</span>
<span class="co">#&gt;  Observations: 300</span>
<span class="co">#&gt;   Bootstr. Type: rademacher</span>
<span class="co">#&gt;  Clustering: 1-way</span>
<span class="co">#&gt;  Confidence Sets: 95%</span>
<span class="co">#&gt;  Number of Clusters: 40</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;              term estimate statistic p.value conf.low conf.high</span>
<span class="co">#&gt; 1 1*treatment = 0    0.079     4.117       0     0.04     0.118</span></code></pre></div>
<p>For a longer introduction to the package’s key function, <code><a href="reference/boottest.html">boottest()</a></code>, please follow this <a href="https://s3alfisc.github.io/fwildclusterboot/articles/fwildclusterboot.html">link</a>.</p>
</div>
<div id="benchmarks" class="section level3">
<h3 class="hasAnchor">
<a href="#benchmarks" class="anchor"></a>Benchmarks</h3>
<p>Results of timing benchmarks of <code><a href="reference/boottest.html">boottest()</a></code>, with a sample of N = 10000, k = 20 covariates and one cluster of dimension N_G (3 iterations each, median runtime is plotted).</p>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
<!-- For a small number of clusters, `fwildclusterboot` is in generally faster than implementations of the wild cluster bootstrap in the `sandwich` and `clusterSEs` packages.  -->
<!-- ![Benchmark](man/figures/bench_ggplot.png) -->
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>You can install compiled versions of<code>fwildclusterboot</code> from CRAN and the development version from R-universe (compiled) or github by following one of the steps below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># from CRAN </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"fwildclusterboot"</span><span class="op">)</span>

<span class="co"># from r-universe (windows &amp; mac, compiled R &gt; 4.0 required)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'fwildclusterboot'</span>, repos <span class="op">=</span><span class="st">'https://s3alfisc.r-universe.dev'</span><span class="op">)</span>

<span class="co"># dev version from github</span>
<span class="co"># note: installation requires Rtools</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"s3alfisc/fwildclusterboot"</span><span class="op">)</span></code></pre></div>
<p>To run <code>WildBootTests.jl</code> through <code>fwildclusterboot</code>, <code>Julia</code> and <code>WildBootTests.jl</code> need to be installed.</p>
<p>You can install Julia by following the steps described on the official <code>Julia</code> homepage: <a href="https://julialang.org/downloads/" class="uri">https://julialang.org/downloads/</a>. <code>WildBootTests.jl</code> can then be installed via Julia’s package management system.</p>
<p>To install <code>WildBootTests.jl</code> and Julia from within R, you can alternatively use the <code>JuliaConnectoR.utils</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"s3alfisc/JuliaConnectoR.utils"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">JuliaConnectoR.utils</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/JuliaConnectoR.utils/man/install_julia.html">install_julia</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># install Julia</span>
<span class="fu"><a href="https://rdrr.io/pkg/JuliaConnectoR.utils/man/connect_julia_R.html">connect_julia_r</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># instructions to connect Julia and R</span>
<span class="fu"><a href="https://rdrr.io/pkg/JuliaConnectoR.utils/man/install_julia_packages.html">install_julia_packages</a></span><span class="op">(</span><span class="st">"WildBootTests.jl"</span><span class="op">)</span> <span class="co"># install WildBootTests.jl</span>
<span class="fu">set_julia_ntreads</span><span class="op">(</span><span class="op">)</span> <span class="co"># instructions to set nthreads for Julia</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=fwildclusterboot">https://​cloud.r-project.org/​package=fwildclusterboot</a>
</li>
<li>Browse source code at <br><a href="https://github.com/s3alfisc/fwildclusterboot/">https://​github.com/​s3alfisc/​fwildclusterboot/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/s3alfisc/fwildclusterboot/issues/">https://​github.com/​s3alfisc/​fwildclusterboot/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> </small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing fwildclusterboot</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alexander Fischer <br><small class="roles"> Author, maintainer </small>  </li>
<li>David Roodman <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=fwildclusterboot"><img src="https://www.r-pkg.org/badges/version/fwildclusterboot" alt="CRAN status"></a></li>
<li><a href="https://github.com/s3alfisc/fwildclusterboot/actions"><img src="https://github.com/s3alfisc/fwildclusterboot/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/s3alfisc/fwildclusterboot?branch=master"><img src="https://codecov.io/gh/s3alfisc/fwildclusterboot/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=fwildclusterboot"><img src="http://cranlogs.r-pkg.org/badges/grand-total/fwildclusterboot?color=blue"></a></li>
<li><a href="https://cran.r-project.org/package=fwildclusterboot"><img src="http://cranlogs.r-pkg.org/badges/last-month/fwildclusterboot?color=green"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Alexander Fischer, David Roodman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
